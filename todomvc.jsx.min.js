var e=function(e,l){if(!l&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(l);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var r=o?Object.getOwnPropertyDescriptor(e,c):null;r&&(r.get||r.set)?Object.defineProperty(n,c,r):n[c]=e[c]}n.default=e,a&&a.set(e,n);return n}(require("react"));function t(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:l})(e)}const l={all:e=>e,active:e=>e.filter((e=>!e.completed)),completed:e=>e.filter((e=>e.completed))};exports.TodoMVC=()=>{const[t,a]=(0,e.useState)(JSON.parse(localStorage.getItem("todos-react")||"[]")),[n,o]=(0,e.useState)("all"),c=(0,e.useMemo)((()=>l[n](t)),[t,n]),r=(0,e.useMemo)((()=>l.active(t).length),[t]),[d,s]=(0,e.useState)(null),i=e=>{const l=[...t];l.splice(l.indexOf(e),1),a(l)},[u,m]=(0,e.useState)(""),f=e=>{if(d){s(null);const l=e.title.trim();a(t.map((t=>t.id===e.id?{...e,title:l}:t))),l||i(e)}};function p(){const e=window.location.hash.replace(/#\/?/,"");l[e]?o(e):(window.location.hash="",o("all"))}return(0,e.useEffect)((()=>{localStorage.setItem("todos-react",JSON.stringify(t))}),[t]),(0,e.useEffect)((()=>{window.addEventListener("hashchange",p),p()}),[]),e.default.createElement("div",{id:"app"},e.default.createElement("section",{className:"todoapp"},e.default.createElement("header",{className:"header"},e.default.createElement("h1",null,"todos"),e.default.createElement("input",{className:"new-todo",autoFocus:!0,placeholder:"What needs to be done?",onKeyDown:e=>{if("Enter"===e.key){const l=e.target.value.trim();l&&(a([...t,{id:Date.now(),title:l,completed:!1}]),e.target.value="")}}})),e.default.createElement("section",{className:"main",style:{display:t.length?"":"none"}},e.default.createElement("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:0===r,onChange:e=>{a(t.map((t=>({...t,completed:e.target.checked}))))}}),e.default.createElement("label",{htmlFor:"toggle-all"},"Mark all as complete"),e.default.createElement("ul",{className:"todo-list"},c.map((l=>e.default.createElement("li",{className:`todo ${l.completed?"completed":""} ${l===d?"editing":""}`,key:l.id},e.default.createElement("div",{className:"view"},e.default.createElement("input",{className:"toggle",type:"checkbox",checked:l.completed,onChange:e=>{return n=l,o=e.target.checked,void a(t.map((e=>e.id===n.id?{...e,completed:o}:e)));var n,o}}),e.default.createElement("label",{onClick:()=>(e=>{m(e.title),s(e)})(l)},l.title),e.default.createElement("button",{className:"destroy",onClick:()=>i(l)},"x")),l.id===(null==d?void 0:d.id)&&e.default.createElement("input",{className:"edit",type:"text","v-model":"todo.title",autoFocus:!0,value:l.title,onBlur:()=>f(l),onInput:e=>{return n=l,o=e.target.value,void a(t.map((e=>e.id===n.id?{...e,title:o}:e)));var n,o},onKeyUp:e=>{"Enter"===e.key&&f(l),"Escape"===e.key&&(e=>{s(null),a(t.map((t=>t.id===e.id?{...e,title:u}:t)))})(l)}})))))),e.default.createElement("footer",{className:"footer",style:{display:t.length?"":"none"}},e.default.createElement("span",{className:"todo-count"},e.default.createElement("strong",null,r),e.default.createElement("span",null,1===r?"item":"items"," left")),e.default.createElement("ul",{className:"filters"},e.default.createElement("li",null,e.default.createElement("a",{href:"#/all",className:"all"===n?"selected":""},"All")),e.default.createElement("li",null,e.default.createElement("a",{href:"#/active",className:"active"===n?"selected":""},"Active")),e.default.createElement("li",null,e.default.createElement("a",{href:"#/completed",className:"completed"===n?"selected":""},"Completed"))),e.default.createElement("button",{className:"clear-completed",onClick:()=>{a(l.active(t))},style:{display:t.length>r?"":"none"}},"Clear completed"))))};